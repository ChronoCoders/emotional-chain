# Validator API Documentation\n\n## Overview\n\nThe Validator API provides comprehensive management of validators in the EmotionalChain network, including registration, staking, delegation, performance monitoring, and emotional score tracking. This API enables both validator operators and delegators to interact with the Proof of Emotion consensus mechanism.\n\n## Base URL\n\n```\n/api/\n```\n\n## Authentication\n\nMost validator operations require authentication. Staking and delegation operations are restricted to validator owners or authorized delegators.\n\n## Validator Management\n\n### Get All Validators\n\n#### GET `/api/validators`\n\nRetrieves information about all active validators on the network.\n\n**Response:**\n```json\n[\n  {\n    \"id\": \"GravityCore\",\n    \"publicKey\": \"0x04a1b2c3d4e5f6...\",\n    \"balance\": \"51234.56\",\n    \"emotionalScore\": \"89.45\",\n    \"reputation\": \"98.7\",\n    \"isActive\": true,\n    \"totalBlocksMined\": 342,\n    \"totalValidations\": 12456,\n    \"lastActivity\": 1738072200000,\n    \"delegatedStake\": \"125000.00\",\n    \"commission\": \"5.0%\",\n    \"uptime\": \"99.8%\",\n    \"biometricDevices\": [\n      {\n        \"type\": \"heartRate\",\n        \"status\": \"connected\",\n        \"lastReading\": 1738072180000,\n        \"signalQuality\": 95\n      }\n    ],\n    \"performanceMetrics\": {\n      \"avgEmotionalScore\": 87.3,\n      \"consensusParticipation\": 99.2,\n      \"blockSuccessRate\": 98.8,\n      \"validationAccuracy\": 99.5\n    }\n  }\n]\n```\n\n**Response Fields:**\n- `id`: Unique validator identifier\n- `publicKey`: Validator's public key for verification\n- `balance`: Current EMO token balance\n- `emotionalScore`: Current emotional score (0-100)\n- `reputation`: Validator reputation score (0-100)\n- `isActive`: Whether validator is actively participating\n- `totalBlocksMined`: Total blocks produced by validator\n- `totalValidations`: Total validations performed\n- `lastActivity`: Timestamp of last network activity\n- `delegatedStake`: Total EMO delegated to this validator\n- `commission`: Commission rate charged to delegators\n- `uptime`: Network uptime percentage\n- `biometricDevices`: Connected biometric devices\n- `performanceMetrics`: Historical performance statistics\n\n---\n\n### Get Validator Details\n\n#### GET `/api/validators/:validatorId`\n\nRetrieves detailed information about a specific validator.\n\n**Example:**\n```\nGET /api/validators/GravityCore\n```\n\n**Response:**\n```json\n{\n  \"id\": \"GravityCore\",\n  \"publicKey\": \"0x04a1b2c3d4e5f6...\",\n  \"balance\": \"51234.56\",\n  \"emotionalScore\": \"89.45\",\n  \"reputation\": \"98.7\",\n  \"isActive\": true,\n  \"registrationDate\": \"2025-01-01T00:00:00Z\",\n  \"lastActivity\": 1738072200000,\n  \"contact\": {\n    \"website\": \"https://gravitycore.io\",\n    \"description\": \"Professional validator focused on emotional wellness\",\n    \"location\": \"United States\"\n  },\n  \"staking\": {\n    \"selfStake\": \"10000.00\",\n    \"delegatedStake\": \"125000.00\",\n    \"totalStake\": \"135000.00\",\n    \"commission\": \"5.0%\",\n    \"maxCommission\": \"10.0%\",\n    \"commissionChangeRate\": \"1.0%\"\n  },\n  \"performance\": {\n    \"blocksProduced\": 342,\n    \"blockSuccessRate\": 98.8,\n    \"validationsPerformed\": 12456,\n    \"validationAccuracy\": 99.5,\n    \"avgEmotionalScore\": 87.3,\n    \"consensusParticipation\": 99.2,\n    \"uptime\": \"99.8%\",\n    \"slashingEvents\": 0\n  },\n  \"biometrics\": {\n    \"devicesConnected\": 2,\n    \"primaryDevice\": {\n      \"type\": \"heartRate\",\n      \"model\": \"Polar H10\",\n      \"status\": \"connected\",\n      \"signalQuality\": 95,\n      \"lastReading\": 1738072180000\n    },\n    \"secondaryDevice\": {\n      \"type\": \"stress\",\n      \"model\": \"Empatica E4\",\n      \"status\": \"connected\",\n      \"signalQuality\": 92,\n      \"lastReading\": 1738072175000\n    },\n    \"emotionalHistory\": [\n      {\n        \"timestamp\": \"2025-01-27T15:00:00Z\",\n        \"score\": 89.45,\n        \"heartRate\": 72,\n        \"stressLevel\": 15,\n        \"focusLevel\": 88\n      }\n    ]\n  },\n  \"rewards\": {\n    \"totalEarned\": \"15678.90\",\n    \"last30Days\": \"1234.56\",\n    \"pendingRewards\": \"234.56\",\n    \"avgDailyReward\": \"41.15\"\n  },\n  \"delegators\": {\n    \"count\": 45,\n    \"totalDelegated\": \"125000.00\",\n    \"topDelegators\": [\n      {\n        \"delegatorId\": \"user123\",\n        \"amount\": \"5000.00\",\n        \"since\": \"2025-01-15T00:00:00Z\"\n      }\n    ]\n  }\n}\n```\n\n---\n\n## Staking Operations\n\n### Stake EMO Tokens\n\n#### POST `/api/staking/stake`\n\nStakes EMO tokens to a validator (self-staking or delegation).\n\n**Request Body:**\n```json\n{\n  \"validatorId\": \"GravityCore\",\n  \"amount\": \"1000.00\",\n  \"stakingType\": \"delegate\", // or \"self\"\n  \"lockPeriod\": 30 // days (optional)\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"transactionHash\": \"0xabc123def456...\",\n  \"message\": \"Successfully staked 1000.00 EMO to GravityCore\",\n  \"stakingDetails\": {\n    \"validatorId\": \"GravityCore\",\n    \"amount\": \"1000.00\",\n    \"stakingType\": \"delegate\",\n    \"expectedAPY\": \"15.7%\",\n    \"lockPeriod\": 30,\n    \"unlockDate\": \"2025-02-26T15:30:00Z\",\n    \"estimatedDailyReward\": \"0.43\"\n  },\n  \"timestamp\": \"2025-01-27T15:30:00Z\"\n}\n```\n\n---\n\n### Unstake EMO Tokens\n\n#### POST `/api/staking/unstake`\n\nUnstakes EMO tokens from a validator.\n\n**Request Body:**\n```json\n{\n  \"validatorId\": \"GravityCore\",\n  \"amount\": \"500.00\",\n  \"immediate\": false // true for emergency unstaking (with penalty)\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"transactionHash\": \"0xdef456ghi789...\",\n  \"message\": \"Successfully initiated unstaking of 500.00 EMO from GravityCore\",\n  \"unstakingDetails\": {\n    \"validatorId\": \"GravityCore\",\n    \"amount\": \"500.00\",\n    \"unbondingPeriod\": 21, // days\n    \"availableDate\": \"2025-02-17T15:30:00Z\",\n    \"penalty\": \"0.00\", // only if immediate unstaking\n    \"remainingStake\": \"500.00\"\n  },\n  \"timestamp\": \"2025-01-27T15:30:00Z\"\n}\n```\n\n---\n\n### Get Staking Status\n\n#### GET `/api/staking/status/:validatorId`\n\nRetrieves detailed staking information for a validator.\n\n**Example:**\n```\nGET /api/staking/status/GravityCore\n```\n\n**Response:**\n```json\n{\n  \"validatorId\": \"GravityCore\",\n  \"totalStaked\": \"135000.00\",\n  \"selfStake\": \"10000.00\",\n  \"delegatedStake\": \"125000.00\",\n  \"stakingRewards\": {\n    \"totalEarned\": \"2456.78\",\n    \"pendingRewards\": \"234.56\",\n    \"lastClaim\": \"2025-01-26T15:30:00Z\",\n    \"nextRewardCycle\": \"2025-01-28T00:00:00Z\"\n  },\n  \"delegations\": [\n    {\n      \"delegatorId\": \"user123\",\n      \"amount\": \"5000.00\",\n      \"delegationDate\": \"2025-01-15T00:00:00Z\",\n      \"rewards\": \"78.90\",\n      \"status\": \"active\"\n    }\n  ],\n  \"unbonding\": [\n    {\n      \"amount\": \"1000.00\",\n      \"initiatedDate\": \"2025-01-20T15:30:00Z\",\n      \"completionDate\": \"2025-02-10T15:30:00Z\",\n      \"status\": \"unbonding\"\n    }\n  ],\n  \"stakingAPY\": \"15.7%\",\n  \"commission\": \"5.0%\",\n  \"stakingStatus\": \"active\",\n  \"timestamp\": \"2025-01-27T15:30:00Z\"\n}\n```\n\n---\n\n## Delegation System\n\n### Get Validators for Delegation\n\n#### GET `/api/delegation/validators`\n\nRetrieves validators suitable for delegation with ranking and performance metrics.\n\n**Query Parameters:**\n- `sortBy`: Sort criteria (`apy`, `reputation`, `emotionalScore`, `uptime`)\n- `limit`: Number of validators to return (default: 50)\n- `minEmotionalScore`: Minimum emotional score filter (default: 75)\n\n**Example:**\n```\nGET /api/delegation/validators?sortBy=apy&limit=10&minEmotionalScore=80\n```\n\n**Response:**\n```json\n[\n  {\n    \"validatorId\": \"GravityCore\",\n    \"name\": \"Gravity Core Validator\",\n    \"description\": \"Professional validator focused on emotional wellness\",\n    \"commission\": \"5.0%\",\n    \"expectedAPY\": \"15.7%\",\n    \"emotionalScore\": 89.45,\n    \"reputation\": 98.7,\n    \"uptime\": \"99.8%\",\n    \"totalStake\": \"135000.00\",\n    \"delegatorCount\": 45,\n    \"maxDelegation\": \"1000000.00\",\n    \"minDelegation\": \"100.00\",\n    \"performance\": {\n      \"rank\": 3,\n      \"consensusParticipation\": 99.2,\n      \"blockSuccessRate\": 98.8,\n      \"averageEmotionalScore\": 87.3\n    },\n    \"contact\": {\n      \"website\": \"https://gravitycore.io\",\n      \"location\": \"United States\"\n    }\n  }\n]\n```\n\n---\n\n### Delegate to Validator\n\n#### POST `/api/delegation/delegate`\n\nDelegates EMO tokens to a specific validator.\n\n**Request Body:**\n```json\n{\n  \"delegatorId\": \"user123\",\n  \"validatorId\": \"GravityCore\",\n  \"amount\": \"5000.00\",\n  \"autoCompound\": true // automatically restake rewards\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"transactionHash\": \"0x123abc456def...\",\n  \"delegationId\": \"del_abc123\",\n  \"message\": \"Successfully delegated 5000.00 EMO to GravityCore\",\n  \"delegationDetails\": {\n    \"delegatorId\": \"user123\",\n    \"validatorId\": \"GravityCore\",\n    \"amount\": \"5000.00\",\n    \"commission\": \"5.0%\",\n    \"expectedAPY\": \"14.9%\", // after commission\n    \"autoCompound\": true,\n    \"estimatedDailyReward\": \"2.04\",\n    \"firstRewardDate\": \"2025-01-28T00:00:00Z\"\n  },\n  \"timestamp\": \"2025-01-27T15:30:00Z\"\n}\n```\n\n---\n\n### Undelegate from Validator\n\n#### POST `/api/delegation/undelegate`\n\nRemoves delegation from a validator.\n\n**Request Body:**\n```json\n{\n  \"delegatorId\": \"user123\",\n  \"validatorId\": \"GravityCore\",\n  \"amount\": \"2000.00\" // partial undelegation\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"transactionHash\": \"0x456def789ghi...\",\n  \"message\": \"Successfully initiated undelegation of 2000.00 EMO from GravityCore\",\n  \"undelegationDetails\": {\n    \"delegatorId\": \"user123\",\n    \"validatorId\": \"GravityCore\",\n    \"amount\": \"2000.00\",\n    \"unbondingPeriod\": 21, // days\n    \"completionDate\": \"2025-02-17T15:30:00Z\",\n    \"remainingDelegation\": \"3000.00\",\n    \"pendingRewards\": \"45.67\" // automatically claimed\n  },\n  \"timestamp\": \"2025-01-27T15:30:00Z\"\n}\n```\n\n---\n\n## Performance Analytics\n\n### Get Validator Statistics\n\n#### GET `/api/delegation/validator/:id/stats`\n\nRetrieves detailed performance statistics for a validator.\n\n**Example:**\n```\nGET /api/delegation/validator/GravityCore/stats\n```\n\n**Response:**\n```json\n{\n  \"validatorId\": \"GravityCore\",\n  \"performanceStats\": {\n    \"overall\": {\n      \"rank\": 3,\n      \"score\": 94.7,\n      \"tier\": \"gold\"\n    },\n    \"emotional\": {\n      \"currentScore\": 89.45,\n      \"averageScore\": 87.3,\n      \"consistency\": 96.2,\n      \"trend\": \"improving\"\n    },\n    \"consensus\": {\n      \"participation\": 99.2,\n      \"accuracy\": 99.5,\n      \"blocksMined\": 342,\n      \"validationsPerformed\": 12456,\n      \"slashingEvents\": 0\n    },\n    \"rewards\": {\n      \"totalDistributed\": \"8945.67\",\n      \"averageAPY\": \"15.7%\",\n      \"rewardConsistency\": 98.9,\n      \"paymentReliability\": 100.0\n    },\n    \"network\": {\n      \"uptime\": 99.8,\n      \"latency\": \"45ms\",\n      \"connectivity\": \"excellent\",\n      \"peerConnections\": 18\n    }\n  },\n  \"historicalData\": {\n    \"7d\": {\n      \"avgEmotionalScore\": 88.2,\n      \"consensusParticipation\": 99.1,\n      \"rewards\": \"287.43\",\n      \"uptime\": 99.9\n    },\n    \"30d\": {\n      \"avgEmotionalScore\": 87.8,\n      \"consensusParticipation\": 98.9,\n      \"rewards\": \"1234.56\",\n      \"uptime\": 99.7\n    }\n  },\n  \"projections\": {\n    \"nextWeekAPY\": \"15.9%\",\n    \"emotionalTrend\": \"stable\",\n    \"riskLevel\": \"low\"\n  },\n  \"timestamp\": \"2025-01-27T15:30:00Z\"\n}\n```\n\n---\n\n## Validator Registration\n\n### Register New Validator\n\n#### POST `/api/validators/register`\n\nRegisters a new validator on the network.\n\n**Request Body:**\n```json\n{\n  \"validatorId\": \"NewValidator\",\n  \"publicKey\": \"0x04a1b2c3d4e5f6...\",\n  \"initialStake\": \"10000.00\", // minimum required\n  \"commission\": \"5.0%\",\n  \"maxCommission\": \"10.0%\",\n  \"commissionChangeRate\": \"1.0%\",\n  \"contact\": {\n    \"name\": \"New Validator Service\",\n    \"website\": \"https://newvalidator.io\",\n    \"description\": \"Professional validation service\",\n    \"location\": \"Canada\"\n  },\n  \"biometricDevices\": [\n    {\n      \"type\": \"heartRate\",\n      \"model\": \"Polar H10\",\n      \"deviceId\": \"polar_h10_xyz789\"\n    }\n  ]\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"validatorId\": \"NewValidator\",\n  \"registrationTx\": \"0x789ghi012jkl...\",\n  \"message\": \"Validator successfully registered\",\n  \"validatorDetails\": {\n    \"validatorId\": \"NewValidator\",\n    \"status\": \"pending_activation\",\n    \"registrationDate\": \"2025-01-27T15:30:00Z\",\n    \"activationDate\": \"2025-01-28T00:00:00Z\", // next epoch\n    \"initialStake\": \"10000.00\",\n    \"commission\": \"5.0%\",\n    \"minimumDelegation\": \"100.00\"\n  },\n  \"nextSteps\": [\n    \"Complete biometric device setup\",\n    \"Verify network connectivity\",\n    \"Wait for activation in next epoch\"\n  ],\n  \"timestamp\": \"2025-01-27T15:30:00Z\"\n}\n```\n\n---\n\n### Update Validator Information\n\n#### PUT `/api/validators/:validatorId`\n\nUpdates validator metadata and configuration.\n\n**Request Body:**\n```json\n{\n  \"commission\": \"6.0%\", // within change rate limits\n  \"contact\": {\n    \"website\": \"https://newdomain.io\",\n    \"description\": \"Updated description\"\n  },\n  \"maxDelegation\": \"2000000.00\"\n}\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"validatorId\": \"GravityCore\",\n  \"updatedFields\": [\"commission\", \"contact\", \"maxDelegation\"],\n  \"changes\": {\n    \"commission\": {\n      \"old\": \"5.0%\",\n      \"new\": \"6.0%\",\n      \"effectiveDate\": \"2025-02-01T00:00:00Z\" // next commission change period\n    }\n  },\n  \"message\": \"Validator information updated successfully\",\n  \"timestamp\": \"2025-01-27T15:30:00Z\"\n}\n```\n\n---\n\n## Validator Monitoring\n\n### Get Real-Time Status\n\n#### GET `/api/validators/:validatorId/status`\n\nRetrieves real-time status and health information for a validator.\n\n**Response:**\n```json\n{\n  \"validatorId\": \"GravityCore\",\n  \"status\": \"active\",\n  \"health\": {\n    \"overall\": \"healthy\",\n    \"score\": 95.2,\n    \"issues\": []\n  },\n  \"consensus\": {\n    \"participating\": true,\n    \"lastBlock\": 12825,\n    \"nextProposal\": \"2025-01-27T15:45:00Z\",\n    \"consensusRound\": 42156\n  },\n  \"biometrics\": {\n    \"emotionalScore\": 89.45,\n    \"lastUpdate\": \"2025-01-27T15:29:30Z\",\n    \"deviceStatus\": {\n      \"heartRateMonitor\": \"connected\",\n      \"stressSensor\": \"connected\"\n    },\n    \"signalQuality\": 95\n  },\n  \"network\": {\n    \"connected\": true,\n    \"peerCount\": 18,\n    \"latency\": \"42ms\",\n    \"bandwidth\": \"150 Mbps\"\n  },\n  \"resources\": {\n    \"cpuUsage\": \"34%\",\n    \"memoryUsage\": \"68%\",\n    \"diskUsage\": \"23%\",\n    \"networkIO\": \"normal\"\n  },\n  \"alerts\": [],\n  \"timestamp\": \"2025-01-27T15:30:00Z\"\n}\n```\n\n---\n\n## Error Handling\n\n**Common Error Codes:**\n- `VALIDATOR_NOT_FOUND`: Specified validator does not exist\n- `INSUFFICIENT_STAKE`: Not enough EMO tokens for operation\n- `INVALID_COMMISSION`: Commission rate outside allowed bounds\n- `DELEGATION_LIMIT_EXCEEDED`: Delegation exceeds validator's maximum\n- `UNBONDING_PERIOD_ACTIVE`: Cannot perform operation during unbonding\n- `EMOTIONAL_SCORE_TOO_LOW`: Validator's emotional score below threshold\n- `BIOMETRIC_DEVICE_OFFLINE`: Required biometric device not connected\n\n**Error Response Format:**\n```json\n{\n  \"error\": \"INSUFFICIENT_STAKE\",\n  \"message\": \"Insufficient EMO balance for staking operation\",\n  \"code\": 400,\n  \"details\": {\n    \"required\": \"1000.00\",\n    \"available\": \"750.50\",\n    \"shortfall\": \"249.50\"\n  },\n  \"timestamp\": \"2025-01-27T15:30:00Z\"\n}\n```\n\n---\n\n## WebSocket Real-Time Updates\n\nSubscribe to real-time validator updates:\n\n```javascript\nconst ws = new WebSocket('ws://localhost:5000/ws');\n\n// Subscribe to validator updates\nws.send(JSON.stringify({\n  type: 'subscribe',\n  channel: 'validators',\n  validatorId: 'GravityCore' // optional, for specific validator\n}));\n\nws.on('message', (data) => {\n  const update = JSON.parse(data);\n  if (update.type === 'validator_update') {\n    console.log('Validator update:', update.data);\n  }\n});\n```\n\n**Update Message Types:**\n- `emotional_score_update`: New emotional score calculated\n- `consensus_participation`: Validator joined/left consensus round\n- `block_produced`: Validator successfully produced a block\n- `reward_received`: New rewards distributed to validator\n- `delegation_changed`: New delegation or undelegation\n- `status_change`: Validator status changed (active/inactive)\n- `biometric_device_status`: Device connection status changed"