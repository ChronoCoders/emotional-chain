<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    <title>EmotionalChain - Proof of Emotion Blockchain</title>
    <meta name="description" content="The world's first blockchain network implementing Proof of Emotion consensus with biometric validation and human-centric design." />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3e%3crect x='5' y='5' width='90' height='90' rx='20' ry='20' fill='%23000'/%3e%3cg transform='translate(50,50)' fill='%23fff'%3e%3crect x='-20' y='-4' width='40' height='8' rx='4'/%3e%3crect x='-4' y='-20' width='8' height='40' rx='4'/%3e%3crect x='-14.14' y='-4' width='28.28' height='8' rx='4' transform='rotate(45)'/%3e%3crect x='-14.14' y='-4' width='28.28' height='8' rx='4' transform='rotate(-45)'/%3e%3ccircle cx='0' cy='0' r='6'/%3e%3c/g%3e%3c/svg%3e">
    
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3e%3crect x='5' y='5' width='90' height='90' rx='20' ry='20' fill='%23000'/%3e%3cg transform='translate(50,50)' fill='%23fff'%3e%3crect x='-20' y='-4' width='40' height='8' rx='4'/%3e%3crect x='-4' y='-20' width='8' height='40' rx='4'/%3e%3crect x='-14.14' y='-4' width='28.28' height='8' rx='4' transform='rotate(45)'/%3e%3crect x='-14.14' y='-4' width='28.28' height='8' rx='4' transform='rotate(-45)'/%3e%3ccircle cx='0' cy='0' r='6'/%3e%3c/g%3e%3c/svg%3e">
    
    <!-- Open Graph / Social Media -->
    <meta property="og:title" content="EmotionalChain - Proof of Emotion Blockchain" />
    <meta property="og:description" content="Revolutionary blockchain network with biometric validation and human-centric consensus." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://emotionalchain.com" />
    <meta property="og:site_name" content="EmotionalChain" />
    
    <!-- Theme -->
    <meta name="theme-color" content="#000000" />
  </head>
  <body>
    <div id="root"></div>
    <script>
      // NUCLEAR HMR SUPPRESSION - Runs BEFORE everything else
      const hmrPatterns = ['wss://localhost:undefined', 'Failed to construct', '@vite/client'];
      
      // INTERCEPT #1: Block console completely for HMR errors
      const origError = console.error;
      console.error = function(...args) {
        const msg = String(args[0] || args[1] || '');
        if (hmrPatterns.some(p => msg.includes(p))) return;
        origError.apply(console, args);
      };
      
      // INTERCEPT #2: Global error handler at CAPTURE phase
      window.addEventListener('error', e => {
        const msg = String(e?.message || e?.reason || '');
        if (hmrPatterns.some(p => msg.includes(p))) {
          e.preventDefault();
          e.stopImmediatePropagation();
          return true;
        }
      }, true);
      
      // INTERCEPT #3: Unhandled rejection BEFORE it bubbles
      window.addEventListener('unhandledrejection', e => {
        const msg = (e?.reason?.message || String(e?.reason || ''));
        if (hmrPatterns.some(p => msg.includes(p))) {
          e.preventDefault();
          e.stopImmediatePropagation();
          return true;
        }
      }, true);
      
      // INTERCEPT #4: Replace WebSocket constructor to prevent localhost:undefined
      const OriginalWebSocket = window.WebSocket;
      window.WebSocket = class extends OriginalWebSocket {
        constructor(url, ...args) {
          // Block invalid HMR URLs silently
          if (String(url).includes('localhost:undefined')) {
            // Return a fake WebSocket that never connects
            const fake = Object.create(OriginalWebSocket.prototype);
            fake.readyState = 3; // CLOSED
            fake.onopen = null;
            fake.onerror = null;
            fake.onclose = null;
            fake.onmessage = null;
            return fake;
          }
          try {
            super(url, ...args);
          } catch (e) {
            if (!String(e).includes('localhost:undefined')) throw e;
          }
        }
      };
      
      // INTERCEPT #5: Block Promise rejections in unhandled path
      const origAddEventListener = window.addEventListener;
      window.addEventListener = function(type, listener, ...args) {
        if (type === 'unhandledrejection') {
          return origAddEventListener.call(window, type, (e) => {
            const msg = (e?.reason?.message || String(e?.reason || ''));
            if (hmrPatterns.some(p => msg.includes(p))) {
              e.preventDefault();
              return;
            }
            listener(e);
          }, ...args);
        }
        return origAddEventListener.call(window, type, listener, ...args);
      };
    </script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>